(()=>{"use strict";class e{constructor(e,t,o){this.projectName=e,this.todo_list=t,this.selected=!1}}const t=(()=>{let t=JSON.parse(localStorage.getItem("task.projects"))||[];function o(e){localStorage.setItem("task.projects",JSON.stringify(e))}return{makeProject:function(n,c){let l=new e(n,c);t.push(l),console.log({projectList:t}),o(t)},changeName:function(e,n){t[n].projectName=e,o(t)},removeProject:function(e){t.splice(e,1),o(t)},select:function(e,n){t[e].selected=n,o(t)},saveProject:o,projectList:t}})();class o{constructor(e,t,o,n,c){this.todoName=e,this.description=t,this.date=o,this.priority=n,this.completed=!1}}const n=(()=>{let e=[];return{isSelected:function(){let e=t.projectList;for(let t=0;t<e.length;t++)if(!0===e[t].selected)return t},makeTodo:function(t,n,c,l){let d=new o(t,n,c,l);return e.push(d),d}}})(),c=(()=>{function e(){const e=document.querySelector(".modal"),t=document.querySelector(".modal-overlay");e.classList.toggle("closed"),t.classList.toggle("closed")}function o(){document.querySelector("#todo-btn").classList.add("closed")}function c(){let e=n.isSelected(),o=t.projectList[e];!function(){const e=document.querySelector("#content"),t=document.querySelectorAll(".todo-container");for(let o=0;o<t.length;o++)e.removeChild(t[o])}(),console.log(o.todo_list);for(let e=0;e<o.todo_list.length;e++)l(o.todo_list[e],e),console.log("test2")}function l(e,o){const l=document.querySelector("#content"),d=document.createElement("div"),r=document.createElement("input"),s=document.createElement("div"),i=document.createElement("h3"),a=document.createElement("div"),u=document.createElement("input"),p=document.createElement("div"),m=document.createElement("button"),h=document.createElement("button");i.textContent=e.todoName,a.textContent=e.description,u.setAttribute("type","date"),u.value=e.date,r.setAttribute("type","checkbox"),m.textContent="E",h.textContent="X",s.classList.add("todo-text"),d.classList.add("todo-container"),m.classList.add("btn"),h.classList.add("btn"),h.addEventListener("click",(()=>{console.log(o),function(e){t.projectList[n.isSelected()].todo_list.splice(e,1),t.saveProject(t.projectList),c()}(o)})),s.appendChild(i),s.appendChild(a),p.appendChild(u),p.appendChild(m),p.appendChild(h),d.appendChild(r),d.appendChild(s),d.appendChild(p),l.append(d)}return document.querySelector("#modal-form").addEventListener("submit",(o=>{o.preventDefault(),function(){const e=document.querySelector("#todo-name"),o=document.querySelector("#todo-description"),l=document.querySelector("#todo-date").value,d=document.querySelector("#priority");let r=n.makeTodo(e.value,o.value,l,d.value),s=n.isSelected();t.projectList[s].todo_list.push(r),t.saveProject(t.projectList),console.log(t.projectList[s]),c()}(),e()})),{addTodoButton:function(){if(void 0!==n.isSelected()){const t=document.querySelector("#todo-btn");t.classList.remove("closed"),document.querySelector("#modal-exit").addEventListener("click",e),t.addEventListener("click",e)}else o()},removeTodoButton:o,displayTodo:c}})(),l=(()=>{const e=document.querySelector("#projects-container");function o(o,c){const d=document.createElement("div"),s=document.createElement("div"),i=document.createElement("button"),a=document.createElement("button");d.classList.add("project"),s.classList.add("project-title"),i.classList.add("btn"),a.classList.add("btn"),i.textContent="E",a.textContent="X",s.addEventListener("click",(e=>{e.stopPropagation(),r(),t.select(c,!0),l()})),i.addEventListener("click",(e=>{e.stopPropagation(),function(e){const o=document.querySelectorAll(".project"),n=document.querySelectorAll(".project-title"),c=document.createElement("input");c.classList.add("edit-text"),c.setAttribute("type","text"),c.setAttribute("maxlength","10"),c.value=t.projectList[e].projectName,o[e].removeChild(n[e]),o[e].appendChild(c),c.addEventListener("keypress",(o=>{"Enter"===o.key&&(console.log("yes"),t.changeName(c.value,e),l())}))}(c)})),a.addEventListener("click",(o=>{o.stopPropagation(),function(o){const c=document.querySelectorAll(".project");e.removeChild(c[o]),t.removeProject(o),l(),console.log(n.isSelected())}(c)})),s.textContent=o,d.appendChild(s),d.appendChild(i),d.appendChild(a),e.appendChild(d)}function l(){!function(){for(;e.firstChild;)e.removeChild(e.firstChild)}();let n=0,l=t.projectList;for(console.log(l);n<l.length;n++)o(l[n].projectName,n),!0===l[n].selected&&(d(n),c.addTodoButton(),c.displayTodo())}function d(e){r(),t.select(e,!0),document.querySelectorAll(".project")[e].style.cssText="background-color: lightblue"}function r(){for(let e=0;e<t.projectList.length;e++)t.select(e,!1)}return document.querySelector("#add-project").addEventListener("submit",(e=>{e.preventDefault();const o=document.querySelector(".project-name");var n;n=o.value,t.makeProject(n,[]),l(),o.value=""})),{addProject:o,render:l}})();console.log("test"),l.render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZXR0ZXItdG9kby1saXN0Ly4vc3JjL3Byb2plY3QtbG9naWMuanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy90b2RvLWxvZ2ljLmpzIiwid2VicGFjazovL2JldHRlci10b2RvLWxpc3QvLi9zcmMvdG9kby1kb20uanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy9wcm9qZWN0LWRvbS5qcyIsIndlYnBhY2s6Ly9iZXR0ZXItdG9kby1saXN0Ly4vc3JjL3Rlc3QuanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJwcm9qZWN0TmFtZSIsInRvZG9fbGlzdCIsInNlbGVjdGVkIiwidGhpcyIsInByb2plY3RMaXN0IiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNhdmVQcm9qZWN0IiwicHJvamVjdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJtYWtlUHJvamVjdCIsIm9iaiIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlTmFtZSIsIm5ld05hbWUiLCJpbmRleCIsInJlbW92ZVByb2plY3QiLCJzcGxpY2UiLCJzZWxlY3QiLCJib29sIiwiVG9kbyIsInRvZG9OYW1lIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZWQiLCJ0b2RvTGlzdCIsImlzU2VsZWN0ZWQiLCJsaXN0IiwiaSIsImxlbmd0aCIsIm1ha2VUb2RvIiwidG9nZ2xlTW9kYWwiLCJtb2RhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1vZGFsT3ZlcmxheSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZVRvZG9CdXR0b24iLCJhZGQiLCJkaXNwbGF5VG9kbyIsImNvbnRlbnQiLCJ0b2RvQ29udGFpbmVyIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNoaWxkIiwiY2xlYXJUb2RvIiwibWFrZVRvZG9UYWciLCJjcmVhdGVFbGVtZW50IiwiY2hlY2siLCJ0b2RvVGV4dCIsInRvZG9EZXNjcmlwdGlvbiIsInRvZG9EYXRlIiwicmlnaHRDb250YWluZXIiLCJlZGl0IiwiZGVsIiwidGV4dENvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVUb2RvIiwiYXBwZW5kQ2hpbGQiLCJhcHBlbmQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0b2RvUHJpb3JpdHkiLCJ0b2RvIiwiZm9ybVN1Ym1pdCIsImFkZFRvZG9CdXR0b24iLCJ1bmRlZmluZWQiLCJ0b2RvQnV0dG9uIiwicmVtb3ZlIiwicHJvamVjdENvbnRhaW5lciIsImFkZFByb2plY3QiLCJpbnB1dE5hbWUiLCJzdG9wUHJvcGFnYXRpb24iLCJkZXNlbGVjdFByb2plY3QiLCJyZW5kZXIiLCJwcm9qZWN0VGl0bGUiLCJlZGl0VGV4dCIsImtleSIsImVkaXRQcm9qZWN0IiwiZGVsZXRlUHJvamVjdCIsImZpcnN0Q2hpbGQiLCJjbGVhclByb2plY3QiLCJzZWxlY3RQcm9qZWN0Iiwic3R5bGUiLCJjc3NUZXh0IiwicHJvamVjdFRleHQiXSwibWFwcGluZ3MiOiJtQkFBQSxNQUFNQSxFQUNMQyxZQUFZQyxFQUFhQyxFQUFXQyxHQUNuQ0MsS0FBS0gsWUFBY0EsRUFDbkJHLEtBQUtGLFVBQVlBLEVBQ2pCRSxLQUFLRCxVQUFXLEdBSWxCLE1BdUNBLEVBdkNxQixNQUNwQixJQUFJRSxFQUFjQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLG1CQUFxQixHQUV2RSxTQUFTQyxFQUFZQyxHQUNwQkgsYUFBYUksUUFBUSxnQkFBaUJOLEtBQUtPLFVBQVVGLElBeUJ0RCxNQUFPLENBQ05HLFlBdkJELFNBQXFCYixFQUFhQyxHQUNqQyxJQUFJYSxFQUFNLElBQUloQixFQUFRRSxFQUFhQyxHQUNuQ0csRUFBWVcsS0FBS0QsR0FDakJFLFFBQVFDLElBQUksQ0FBRWIsZ0JBQ2RLLEVB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QUNwQlUsRUFBUXdELFlBQVlQLEdBQ3BCakQsRUFBUXdELFlBQVlOLEdBRXBCaUIsRUFBaUJYLFlBQVl4RCxHQUc5QixTQUFTd0UsS0FlVCxXQUNDLEtBQU9MLEVBQWlCVyxZQUN2QlgsRUFBaUIzQixZQUFZMkIsRUFBaUJXLFlBaEIvQ0MsR0FDQSxJQUFJdkQsRUFBSSxFQUNKRCxFQUFPLGNBRVgsSUFEQWpCLFFBQVFDLElBQUlnQixHQUNKQyxFQUFJRCxFQUFLRSxPQUFRRCxJQUN4QjRDLEVBQVc3QyxFQUFLQyxHQUFHbEMsWUFBYWtDLElBQ1AsSUFBckJELEVBQUtDLEdBQUdoQyxXQUNYd0YsRUFBY3hELEdBQ2Qsa0JBQ0EsaUJBMkNILFNBQVN3RCxFQUFjeEQsR0FDdEIrQyxJQUNBLFNBQW9CL0MsR0FBRyxHQUNQSyxTQUFTVSxpQkFBaUIsWUFDbENmLEdBQUd5RCxNQUFNQyxRQUFVLDhCQUc1QixTQUFTWCxJQUNSLElBQUssSUFBSS9DLEVBQUksRUFBR0EsRUFBSSxxQkFBaUNBLElBQ3BELFNBQW9CQSxHQUFHLEdBSXpCLE9BbkhvQkssU0FBU0MsY0FBYyxnQkFFL0J3QixpQkFBaUIsVUFBV0ksSUFDdkNBLEVBQUVDLGlCQUNGLE1BQU13QixFQUFjdEQsU0FBU0MsY0FBYyxpQkFrRTVDLElBQTJCeEMsSUFqRVI2RixFQUFZOUIsTUFrRTlCLGNBQXlCL0QsRUFBYSxJQWpFdENrRixJQUNBVyxFQUFZOUIsTUFBUSxNQTRHZCxDQUFFZSxhQUFZSSxXQXJISCxHQ0hsQmxFLFFBQVFDLElBQUksUUNLYixZIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQcm9qZWN0IHtcblx0Y29uc3RydWN0b3IocHJvamVjdE5hbWUsIHRvZG9fbGlzdCwgc2VsZWN0ZWQpIHtcblx0XHR0aGlzLnByb2plY3ROYW1lID0gcHJvamVjdE5hbWU7XG5cdFx0dGhpcy50b2RvX2xpc3QgPSB0b2RvX2xpc3Q7XG5cdFx0dGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuXHR9XG59XG5cbmNvbnN0IHByb2plY3RMb2dpYyA9ICgoKSA9PiB7XG5cdGxldCBwcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrLnByb2plY3RzXCIpKSB8fCBbXTtcblxuXHRmdW5jdGlvbiBzYXZlUHJvamVjdChwcm9qZWN0KSB7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0YXNrLnByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3QpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1ha2VQcm9qZWN0KHByb2plY3ROYW1lLCB0b2RvX2xpc3QpIHtcblx0XHRsZXQgb2JqID0gbmV3IFByb2plY3QocHJvamVjdE5hbWUsIHRvZG9fbGlzdCk7XG5cdFx0cHJvamVjdExpc3QucHVzaChvYmopO1xuXHRcdGNvbnNvbGUubG9nKHsgcHJvamVjdExpc3QgfSk7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlUHJvamVjdChpbmRleCkge1xuXHRcdHByb2plY3RMaXN0LnNwbGljZShpbmRleCwgMSk7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlTmFtZShuZXdOYW1lLCBpbmRleCkge1xuXHRcdHByb2plY3RMaXN0W2luZGV4XS5wcm9qZWN0TmFtZSA9IG5ld05hbWU7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2VsZWN0KGluZGV4LCBib29sKSB7XG5cdFx0cHJvamVjdExpc3RbaW5kZXhdLnNlbGVjdGVkID0gYm9vbDtcblx0XHRzYXZlUHJvamVjdChwcm9qZWN0TGlzdCk7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdG1ha2VQcm9qZWN0LFxuXHRcdGNoYW5nZU5hbWUsXG5cdFx0cmVtb3ZlUHJvamVjdCxcblx0XHRzZWxlY3QsXG5cdFx0c2F2ZVByb2plY3QsXG5cdFx0cHJvamVjdExpc3QsXG5cdH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBwcm9qZWN0TG9naWM7XG4iLCJpbXBvcnQgcHJvamVjdExvZ2ljIGZyb20gXCIuL3Byb2plY3QtbG9naWMuanNcIjtcblxuY2xhc3MgVG9kbyB7XG5cdGNvbnN0cnVjdG9yKHRvZG9OYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlZCkge1xuXHRcdHRoaXMudG9kb05hbWUgPSB0b2RvTmFtZTtcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG5cdFx0dGhpcy5kYXRlID0gZGF0ZTtcblx0XHR0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG5cdFx0dGhpcy5jb21wbGV0ZWQgPSBmYWxzZTtcblx0fVxufVxuXG5jb25zdCB0b2RvTG9naWMgPSAoKCkgPT4ge1xuXHRsZXQgdG9kb0xpc3QgPSBbXTtcblxuXHRmdW5jdGlvbiBtYWtlVG9kbyh0b2RvTmFtZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5KSB7XG5cdFx0bGV0IG9iaiA9IG5ldyBUb2RvKHRvZG9OYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpO1xuXHRcdHRvZG9MaXN0LnB1c2gob2JqKTtcblx0XHRyZXR1cm4gb2JqO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlVG9kbyhpbmRleCkge1xuXHRcdHRvZG9MaXN0LnNwbGljZShpbmRleCwgMSk7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlVG9kbyhuZXdOYW1lLCBpbmRleCkge1xuXHRcdHRvZG9MaXN0W2luZGV4XS5wcm9qZWN0TmFtZSA9IG5ld05hbWU7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gaXNTZWxlY3RlZCgpIHtcblx0XHRsZXQgbGlzdCA9IHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdDtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChsaXN0W2ldLnNlbGVjdGVkID09PSB0cnVlKSByZXR1cm4gaTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBpc1NlbGVjdGVkLCBtYWtlVG9kbyB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9kb0xvZ2ljO1xuIiwiaW1wb3J0IHByb2plY3RMb2dpYyBmcm9tIFwiLi9wcm9qZWN0LWxvZ2ljLmpzXCI7XG5pbXBvcnQgdG9kb0xvZ2ljIGZyb20gXCIuL3RvZG8tbG9naWMuanNcIjtcblxuY29uc3QgdG9kb0RPTSA9ICgoKSA9PiB7XG5cdGZ1bmN0aW9uIGFkZFRvZG9CdXR0b24oKSB7XG5cdFx0aWYgKHRvZG9Mb2dpYy5pc1NlbGVjdGVkKCkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3QgdG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1idG5cIik7XG5cdFx0XHR0b2RvQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjbG9zZWRcIik7XG5cblx0XHRcdGNvbnN0IG1vZGFsRXhpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZXhpdFwiKTtcblxuXHRcdFx0bW9kYWxFeGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNb2RhbCk7XG5cdFx0XHR0b2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNb2RhbCk7XG5cdFx0fSBlbHNlIHJlbW92ZVRvZG9CdXR0b24oKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRvZ2dsZU1vZGFsKCkge1xuXHRcdGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcblx0XHRjb25zdCBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLW92ZXJsYXlcIik7XG5cblx0XHRtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiY2xvc2VkXCIpO1xuXHRcdG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKFwiY2xvc2VkXCIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlVG9kb0J1dHRvbigpIHtcblx0XHRjb25zdCB0b2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWJ0blwiKTtcblx0XHR0b2RvQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjbG9zZWRcIik7XG5cdH1cblxuXHRjb25zdCBtb2RhbEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWZvcm1cIik7XG5cdG1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGZvcm1TdWJtaXQoKTtcblx0XHR0b2dnbGVNb2RhbCgpO1xuXHR9KTtcblxuXHRmdW5jdGlvbiBmb3JtU3VibWl0KCkge1xuXHRcdGNvbnN0IHRvZG9OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLW5hbWVcIik7XG5cdFx0Y29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWRlc2NyaXB0aW9uXCIpO1xuXHRcdGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWRhdGVcIikudmFsdWU7XG5cdFx0Y29uc3QgdG9kb1ByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmlvcml0eVwiKTtcblxuXHRcdGxldCB0b2RvID0gdG9kb0xvZ2ljLm1ha2VUb2RvKFxuXHRcdFx0dG9kb05hbWUudmFsdWUsXG5cdFx0XHR0b2RvRGVzY3JpcHRpb24udmFsdWUsXG5cdFx0XHR0b2RvRGF0ZSxcblx0XHRcdHRvZG9Qcmlvcml0eS52YWx1ZVxuXHRcdCk7XG5cblx0XHRsZXQgaW5kZXggPSB0b2RvTG9naWMuaXNTZWxlY3RlZCgpO1xuXHRcdHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFtpbmRleF0udG9kb19saXN0LnB1c2godG9kbyk7XG5cdFx0cHJvamVjdExvZ2ljLnNhdmVQcm9qZWN0KHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdCk7XG5cdFx0Y29uc29sZS5sb2cocHJvamVjdExvZ2ljLnByb2plY3RMaXN0W2luZGV4XSk7XG5cdFx0ZGlzcGxheVRvZG8oKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRpc3BsYXlUb2RvKCkge1xuXHRcdGxldCBpbmRleCA9IHRvZG9Mb2dpYy5pc1NlbGVjdGVkKCk7XG5cdFx0bGV0IGxpc3QgPSBwcm9qZWN0TG9naWMucHJvamVjdExpc3RbaW5kZXhdO1xuXHRcdGNsZWFyVG9kbygpO1xuXHRcdGNvbnNvbGUubG9nKGxpc3QudG9kb19saXN0KTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QudG9kb19saXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRtYWtlVG9kb1RhZyhsaXN0LnRvZG9fbGlzdFtpXSwgaSk7XG5cdFx0XHRjb25zb2xlLmxvZyhcInRlc3QyXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFyVG9kbygpIHtcblx0XHRjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250ZW50XCIpO1xuXHRcdGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvZG8tY29udGFpbmVyXCIpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdG9kb0NvbnRhaW5lci5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29udGVudC5yZW1vdmVDaGlsZCh0b2RvQ29udGFpbmVyW2ldKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBtYWtlVG9kb1RhZyhvYmosIGkpIHtcblx0XHRjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250ZW50XCIpO1xuXHRcdGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGNvbnN0IGNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXHRcdGNvbnN0IHRvZG9UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCB0b2RvTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcblx0XHRjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXHRcdGNvbnN0IHJpZ2h0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCBlZGl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0XHRjb25zdCBkZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG5cdFx0dG9kb05hbWUudGV4dENvbnRlbnQgPSBvYmoudG9kb05hbWU7XG5cdFx0dG9kb0Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gb2JqLmRlc2NyaXB0aW9uO1xuXHRcdHRvZG9EYXRlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuXHRcdHRvZG9EYXRlLnZhbHVlID0gb2JqLmRhdGU7XG5cdFx0Y2hlY2suc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuXHRcdGVkaXQudGV4dENvbnRlbnQgPSBcIkVcIjtcblx0XHRkZWwudGV4dENvbnRlbnQgPSBcIlhcIjtcblxuXHRcdHRvZG9UZXh0LmNsYXNzTGlzdC5hZGQoXCJ0b2RvLXRleHRcIik7XG5cdFx0dG9kb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidG9kby1jb250YWluZXJcIik7XG5cdFx0ZWRpdC5jbGFzc0xpc3QuYWRkKFwiYnRuXCIpO1xuXHRcdGRlbC5jbGFzc0xpc3QuYWRkKFwiYnRuXCIpO1xuXG5cdFx0ZGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhpKTtcblx0XHRcdGRlbGV0ZVRvZG8oaSk7XG5cdFx0fSk7XG5cblx0XHR0b2RvVGV4dC5hcHBlbmRDaGlsZCh0b2RvTmFtZSk7XG5cdFx0dG9kb1RleHQuYXBwZW5kQ2hpbGQodG9kb0Rlc2NyaXB0aW9uKTtcblx0XHRyaWdodENvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvRGF0ZSk7XG5cdFx0cmlnaHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZWRpdCk7XG5cdFx0cmlnaHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVsKTtcblx0XHR0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrKTtcblx0XHR0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9UZXh0KTtcblx0XHR0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKHJpZ2h0Q29udGFpbmVyKTtcblx0XHRjb250ZW50LmFwcGVuZCh0b2RvQ29udGFpbmVyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRlbGV0ZVRvZG8oaSkge1xuXHRcdGxldCBsaXN0ID0gcHJvamVjdExvZ2ljLnByb2plY3RMaXN0W3RvZG9Mb2dpYy5pc1NlbGVjdGVkKCldLnRvZG9fbGlzdDtcblx0XHRsaXN0LnNwbGljZShpLCAxKTtcblx0XHRwcm9qZWN0TG9naWMuc2F2ZVByb2plY3QocHJvamVjdExvZ2ljLnByb2plY3RMaXN0KTtcblx0XHRkaXNwbGF5VG9kbygpO1xuXHR9XG5cblx0cmV0dXJuIHsgYWRkVG9kb0J1dHRvbiwgcmVtb3ZlVG9kb0J1dHRvbiwgZGlzcGxheVRvZG8gfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvZG9ET007XG4iLCJpbXBvcnQgcHJvamVjdExvZ2ljIGZyb20gXCIuL3Byb2plY3QtbG9naWMuanNcIjtcbmltcG9ydCB0b2RvTG9naWMgZnJvbSBcIi4vdG9kby1sb2dpYy5qc1wiO1xuaW1wb3J0IHRvZG9ET00gZnJvbSBcIi4vdG9kby1kb20uanNcIjtcblxuY29uc3QgcHJvamVjdERPTSA9ICgoKSA9PiB7XG5cdGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzLWNvbnRhaW5lclwiKTtcblx0Y29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1wcm9qZWN0XCIpO1xuXG5cdHByb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Y29uc3QgcHJvamVjdFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKTtcblx0XHRhZGRQcm9qZWN0VG9BcnJheShwcm9qZWN0VGV4dC52YWx1ZSk7XG5cdFx0cmVuZGVyKCk7XG5cdFx0cHJvamVjdFRleHQudmFsdWUgPSBcIlwiO1xuXHR9KTtcblxuXHRmdW5jdGlvbiBhZGRQcm9qZWN0KGlucHV0TmFtZSwgaSkge1xuXHRcdGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCBlZGl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0XHRjb25zdCBkZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG5cdFx0cHJvamVjdC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcblx0XHRwcm9qZWN0TmFtZS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10aXRsZVwiKTtcblx0XHRlZGl0LmNsYXNzTGlzdC5hZGQoXCJidG5cIik7XG5cdFx0ZGVsLmNsYXNzTGlzdC5hZGQoXCJidG5cIik7XG5cdFx0ZWRpdC50ZXh0Q29udGVudCA9IFwiRVwiO1xuXHRcdGRlbC50ZXh0Q29udGVudCA9IFwiWFwiO1xuXG5cdFx0cHJvamVjdE5hbWUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZGVzZWxlY3RQcm9qZWN0KCk7XG5cdFx0XHRwcm9qZWN0TG9naWMuc2VsZWN0KGksIHRydWUpO1xuXHRcdFx0cmVuZGVyKCk7XG5cdFx0fSk7XG5cblx0XHRlZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGVkaXRQcm9qZWN0KGkpO1xuXHRcdH0pO1xuXG5cdFx0ZGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGRlbGV0ZVByb2plY3QoaSk7XG5cdFx0fSk7XG5cblx0XHRwcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IGlucHV0TmFtZTtcblxuXHRcdHByb2plY3QuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xuXHRcdHByb2plY3QuYXBwZW5kQ2hpbGQoZWRpdCk7XG5cdFx0cHJvamVjdC5hcHBlbmRDaGlsZChkZWwpO1xuXG5cdFx0cHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRjbGVhclByb2plY3QoKTtcblx0XHRsZXQgaSA9IDA7XG5cdFx0bGV0IGxpc3QgPSBwcm9qZWN0TG9naWMucHJvamVjdExpc3Q7XG5cdFx0Y29uc29sZS5sb2cobGlzdCk7XG5cdFx0Zm9yIChpOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0YWRkUHJvamVjdChsaXN0W2ldLnByb2plY3ROYW1lLCBpKTtcblx0XHRcdGlmIChsaXN0W2ldLnNlbGVjdGVkID09PSB0cnVlKSB7XG5cdFx0XHRcdHNlbGVjdFByb2plY3QoaSk7XG5cdFx0XHRcdHRvZG9ET00uYWRkVG9kb0J1dHRvbigpO1xuXHRcdFx0XHR0b2RvRE9NLmRpc3BsYXlUb2RvKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYXJQcm9qZWN0KCkge1xuXHRcdHdoaWxlIChwcm9qZWN0Q29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHByb2plY3RDb250YWluZXIucmVtb3ZlQ2hpbGQocHJvamVjdENvbnRhaW5lci5maXJzdENoaWxkKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRQcm9qZWN0VG9BcnJheShwcm9qZWN0TmFtZSkge1xuXHRcdHByb2plY3RMb2dpYy5tYWtlUHJvamVjdChwcm9qZWN0TmFtZSwgW10pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVsZXRlUHJvamVjdChpKSB7XG5cdFx0Ly8gaWYgKHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdClcblx0XHRjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpO1xuXHRcdHByb2plY3RDb250YWluZXIucmVtb3ZlQ2hpbGQocHJvamVjdFtpXSk7XG5cdFx0cHJvamVjdExvZ2ljLnJlbW92ZVByb2plY3QoaSk7XG5cdFx0cmVuZGVyKCk7XG5cdFx0Y29uc29sZS5sb2codG9kb0xvZ2ljLmlzU2VsZWN0ZWQoKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBlZGl0UHJvamVjdChpKSB7XG5cdFx0Y29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKTtcblx0XHRjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtdGl0bGVcIik7XG5cdFx0Y29uc3QgZWRpdFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0ZWRpdFRleHQuY2xhc3NMaXN0LmFkZChcImVkaXQtdGV4dFwiKTtcblx0XHRlZGl0VGV4dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcblx0XHRlZGl0VGV4dC5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCIxMFwiKTtcblx0XHRlZGl0VGV4dC52YWx1ZSA9IHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFtpXS5wcm9qZWN0TmFtZTtcblx0XHRwcm9qZWN0W2ldLnJlbW92ZUNoaWxkKHByb2plY3RUaXRsZVtpXSk7XG5cdFx0cHJvamVjdFtpXS5hcHBlbmRDaGlsZChlZGl0VGV4dCk7XG5cdFx0ZWRpdFRleHQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIChlKSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcInllc1wiKTtcblx0XHRcdFx0cHJvamVjdExvZ2ljLmNoYW5nZU5hbWUoZWRpdFRleHQudmFsdWUsIGkpO1xuXHRcdFx0XHRyZW5kZXIoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNlbGVjdFByb2plY3QoaSkge1xuXHRcdGRlc2VsZWN0UHJvamVjdCgpO1xuXHRcdHByb2plY3RMb2dpYy5zZWxlY3QoaSwgdHJ1ZSk7XG5cdFx0Y29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKTtcblx0XHRwcm9qZWN0W2ldLnN0eWxlLmNzc1RleHQgPSBcImJhY2tncm91bmQtY29sb3I6IGxpZ2h0Ymx1ZVwiO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVzZWxlY3RQcm9qZWN0KCkge1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdExvZ2ljLnByb2plY3RMaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRwcm9qZWN0TG9naWMuc2VsZWN0KGksIGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBhZGRQcm9qZWN0LCByZW5kZXIgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHByb2plY3RET007XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0ZXN0KCkge1xuXHRjb25zb2xlLmxvZyhcInRlc3RcIik7XG59XG4iLCJpbXBvcnQgdGVzdCBmcm9tIFwiLi90ZXN0LmpzXCI7XG5pbXBvcnQgcHJvamVjdExvZ2ljIGZyb20gXCIuL3Byb2plY3QtbG9naWMuanNcIjtcbmltcG9ydCBwcm9qZWN0RE9NIGZyb20gXCIuL3Byb2plY3QtZG9tLmpzXCI7XG5pbXBvcnQgdG9kb0xvZ2ljIGZyb20gXCIuL3RvZG8tbG9naWMuanNcIjtcblxudGVzdCgpO1xucHJvamVjdERPTS5yZW5kZXIoKTtcbnByb2plY3RET007XG4iXSwic291cmNlUm9vdCI6IiJ9