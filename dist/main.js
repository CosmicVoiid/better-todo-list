(()=>{"use strict";class e{constructor(e,t,o){this.projectName=e,this.todo_list=t,this.selected=!1}}const t=(()=>{let t=JSON.parse(localStorage.getItem("task.projects"))||[];function o(e){localStorage.setItem("task.projects",JSON.stringify(e))}return{makeProject:function(n,c){let d=new e(n,c);t.push(d),console.log({projectList:t}),o(t)},changeName:function(e,n){t[n].projectName=e,o(t)},removeProject:function(e){t.splice(e,1),o(t)},select:function(e,n){t[e].selected=n,o(t)},saveProject:o,projectList:t}})();class o{constructor(e,t,o,n,c){this.todoName=e,this.description=t,this.date=o,this.priority=n,this.completed=!1}}const n=(()=>{let e=[];return{isSelected:function(){let e=t.projectList;for(let t=0;t<e.length;t++)if(!0===e[t].selected)return t},makeTodo:function(t,n,c,d){let l=new o(t,n,c,d);return e.push(l),l}}})(),c=(()=>{function e(){const e=document.querySelector(".modal"),t=document.querySelector(".modal-overlay");e.classList.toggle("closed"),t.classList.toggle("closed")}function o(){document.querySelector("#todo-btn").classList.add("closed")}function c(){const o=document.querySelector("#todo-name"),c=document.querySelector("#todo-description"),d=document.querySelector("#todo-date"),r=document.querySelector("#priority");!function(){const e=document.querySelector("#todo-name"),o=document.querySelector("#todo-description"),c=document.querySelector("#todo-date").value,d=document.querySelector("#priority");let r=n.makeTodo(e.value,o.value,c,d.value),s=n.isSelected();t.projectList[s].todo_list.push(r),t.saveProject(t.projectList),console.log(t.projectList[s]),l()}(),o.value="",c.value="",d.value="",r.value="",e()}const d=document.querySelector("#modal-form");function l(){let e=n.isSelected(),o=t.projectList[e];r(),console.log(o.todo_list);for(let e=0;e<o.todo_list.length;e++)s(o.todo_list[e],e),console.log("test2")}function r(){const e=document.querySelector("#content"),t=document.querySelectorAll(".todo-container");for(let o=0;o<t.length;o++)e.removeChild(t[o])}function s(o,s){const i=document.querySelector("#content"),a=document.createElement("div"),u=document.createElement("input"),m=document.createElement("div"),p=document.createElement("h3"),v=document.createElement("div"),y=document.createElement("input"),L=document.createElement("div"),h=document.createElement("button"),j=document.createElement("button");p.textContent=o.todoName,v.textContent=o.description,y.setAttribute("type","date"),y.value=o.date,y.classList.add("todo-date-div"),u.setAttribute("type","checkbox"),h.textContent="E",j.textContent="X",m.classList.add("todo-text"),a.classList.add("todo-container"),h.classList.add("btn"),j.classList.add("btn"),h.addEventListener("click",(()=>{!function(o){let s=t.projectList[n.isSelected()].todo_list;const i=document.querySelector("#todo-name"),a=document.querySelector("#todo-description"),u=document.querySelector("#todo-date"),m=document.querySelector("#priority");i.value=s[o].todoName,a.value=s[o].description,u.value=s[o].date,m.value=s[o].priority,e(),d.removeEventListener("submit",c),d.addEventListener("submit",(function n(){s[o].todoName=i.value,s[o].description=a.value,s[o].date=u.value,s[o].priority=m.value,r(),l(),e(),i.value="",a.value="",u.value="",m.value="",t.saveProject(t.projectList),this.removeEventListener("submit",n),d.addEventListener("submit",c)}))}(s)})),j.addEventListener("click",(()=>{console.log(s),function(e){t.projectList[n.isSelected()].todo_list.splice(e,1),t.saveProject(t.projectList),l()}(s)})),y.addEventListener("change",(()=>{o.date=y.value,t.saveProject(t.projectList)})),m.appendChild(p),m.appendChild(v),L.appendChild(y),L.appendChild(h),L.appendChild(j),a.appendChild(u),a.appendChild(m),a.appendChild(L),i.append(a)}return d.addEventListener("submit",(e=>{e.preventDefault()})),d.addEventListener("submit",c),{addTodoButton:function(){if(void 0!==n.isSelected()){const t=document.querySelector("#todo-btn");t.classList.remove("closed"),document.querySelector("#modal-exit").addEventListener("click",e),t.addEventListener("click",e)}else o()},removeTodoButton:o,displayTodo:l}})(),d=(()=>{const e=document.querySelector("#projects-container");function o(o,c){const l=document.createElement("div"),s=document.createElement("div"),i=document.createElement("button"),a=document.createElement("button");l.classList.add("project"),s.classList.add("project-title"),i.classList.add("btn"),a.classList.add("btn"),i.textContent="E",a.textContent="X",s.addEventListener("click",(e=>{e.stopPropagation(),r(),t.select(c,!0),d()})),i.addEventListener("click",(e=>{e.stopPropagation(),function(e){const o=document.querySelectorAll(".project"),n=document.querySelectorAll(".project-title"),c=document.createElement("input");c.classList.add("edit-text"),c.setAttribute("type","text"),c.setAttribute("maxlength","10"),c.value=t.projectList[e].projectName,o[e].removeChild(n[e]),o[e].appendChild(c),c.addEventListener("keypress",(o=>{"Enter"===o.key&&(console.log("yes"),t.changeName(c.value,e),d())}))}(c)})),a.addEventListener("click",(o=>{o.stopPropagation(),function(o){const c=document.querySelectorAll(".project");e.removeChild(c[o]),t.removeProject(o),d(),console.log(n.isSelected())}(c)})),s.textContent=o,l.appendChild(s),l.appendChild(i),l.appendChild(a),e.appendChild(l)}function d(){!function(){for(;e.firstChild;)e.removeChild(e.firstChild)}();let n=0,d=t.projectList;for(console.log(d);n<d.length;n++)o(d[n].projectName,n),!0===d[n].selected&&(l(n),c.addTodoButton(),c.displayTodo())}function l(e){r(),t.select(e,!0),document.querySelectorAll(".project")[e].style.cssText="background-color: lightblue"}function r(){for(let e=0;e<t.projectList.length;e++)t.select(e,!1)}return document.querySelector("#add-project").addEventListener("submit",(e=>{e.preventDefault();const o=document.querySelector(".project-name");var n;n=o.value,t.makeProject(n,[]),d(),o.value=""})),{addProject:o,render:d}})();console.log("test"),d.render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZXR0ZXItdG9kby1saXN0Ly4vc3JjL3Byb2plY3QtbG9naWMuanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy90b2RvLWxvZ2ljLmpzIiwid2VicGFjazovL2JldHRlci10b2RvLWxpc3QvLi9zcmMvdG9kby1kb20uanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy9wcm9qZWN0LWRvbS5qcyIsIndlYnBhY2s6Ly9iZXR0ZXItdG9kby1saXN0Ly4vc3JjL3Rlc3QuanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJwcm9qZWN0TmFtZSIsInRvZG9fbGlzdCIsInNlbGVjdGVkIiwidGhpcyIsInByb2plY3RMaXN0IiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNhdmVQcm9qZWN0IiwicHJvamVjdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJtYWtlUHJvamVjdCIsIm9iaiIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlTmFtZSIsIm5ld05hbWUiLCJpbmRleCIsInJlbW92ZVByb2plY3QiLCJzcGxpY2UiLCJzZWxlY3QiLCJib29sIiwiVG9kbyIsInRvZG9OYW1lIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZWQiLCJ0b2RvTGlzdCIsImlzU2VsZWN0ZWQiLCJsaXN0IiwiaSIsImxlbmd0aCIsIm1ha2VUb2RvIiwidG9nZ2xlTW9kYWwiLCJtb2RhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1vZGFsT3ZlcmxheSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZVRvZG9CdXR0b24iLCJhZGQiLCJtb2RhbEZsb3ciLCJ0b2RvRGVzY3JpcHRpb24iLCJ0b2RvRGF0ZSIsInRvZG9Qcmlvcml0eSIsInZhbHVlIiwidG9kbyIsImRpc3BsYXlUb2RvIiwiZm9ybVN1Ym1pdCIsIm1vZGFsRm9ybSIsImNsZWFyVG9kbyIsIm1ha2VUb2RvVGFnIiwiY29udGVudCIsInRvZG9Db250YWluZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVFbGVtZW50IiwiY2hlY2siLCJ0b2RvVGV4dCIsInJpZ2h0Q29udGFpbmVyIiwiZWRpdCIsImRlbCIsInRleHRDb250ZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0b2RvRWRpdEZvcm0iLCJlZGl0VG9kbyIsImRlbGV0ZVRvZG8iLCJhcHBlbmRDaGlsZCIsImFwcGVuZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImFkZFRvZG9CdXR0b24iLCJ1bmRlZmluZWQiLCJ0b2RvQnV0dG9uIiwicmVtb3ZlIiwicHJvamVjdENvbnRhaW5lciIsImFkZFByb2plY3QiLCJpbnB1dE5hbWUiLCJzdG9wUHJvcGFnYXRpb24iLCJkZXNlbGVjdFByb2plY3QiLCJyZW5kZXIiLCJwcm9qZWN0VGl0bGUiLCJlZGl0VGV4dCIsImtleSIsImVkaXRQcm9qZWN0IiwiZGVsZXRlUHJvamVjdCIsImZpcnN0Q2hpbGQiLCJjbGVhclByb2plY3QiLCJzZWxlY3RQcm9qZWN0Iiwic3R5bGUiLCJjc3NUZXh0IiwicHJvamVjdFRleHQiXSwibWFwcGluZ3MiOiJtQkFBQSxNQUFNQSxFQUNMQyxZQUFZQyxFQUFhQyxFQUFXQyxHQUNuQ0MsS0FBS0gsWUFBY0EsRUFDbkJHLEtBQUtGLFVBQVlBLEVBQ2pCRSxLQUFLRCxVQUFXLEdBSWxCLE1BdUNBLEVBdkNxQixNQUNwQixJQUFJRSxFQUFjQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLG1CQUFxQixHQUV2RSxTQUFTQyxFQUFZQyxHQUNwQkgsYUFBYUksUUFBUSxnQkFBaUJOLEtBQUtPLFVBQVVGLElBeUJ0RCxNQUFPLENBQ05HLFlBdkJELFNBQXFCYixFQUFhQyxHQUNqQyxJQUFJYSxFQUFN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YixZIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQcm9qZWN0IHtcblx0Y29uc3RydWN0b3IocHJvamVjdE5hbWUsIHRvZG9fbGlzdCwgc2VsZWN0ZWQpIHtcblx0XHR0aGlzLnByb2plY3ROYW1lID0gcHJvamVjdE5hbWU7XG5cdFx0dGhpcy50b2RvX2xpc3QgPSB0b2RvX2xpc3Q7XG5cdFx0dGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuXHR9XG59XG5cbmNvbnN0IHByb2plY3RMb2dpYyA9ICgoKSA9PiB7XG5cdGxldCBwcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrLnByb2plY3RzXCIpKSB8fCBbXTtcblxuXHRmdW5jdGlvbiBzYXZlUHJvamVjdChwcm9qZWN0KSB7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0YXNrLnByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3QpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1ha2VQcm9qZWN0KHByb2plY3ROYW1lLCB0b2RvX2xpc3QpIHtcblx0XHRsZXQgb2JqID0gbmV3IFByb2plY3QocHJvamVjdE5hbWUsIHRvZG9fbGlzdCk7XG5cdFx0cHJvamVjdExpc3QucHVzaChvYmopO1xuXHRcdGNvbnNvbGUubG9nKHsgcHJvamVjdExpc3QgfSk7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlUHJvamVjdChpbmRleCkge1xuXHRcdHByb2plY3RMaXN0LnNwbGljZShpbmRleCwgMSk7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlTmFtZShuZXdOYW1lLCBpbmRleCkge1xuXHRcdHByb2plY3RMaXN0W2luZGV4XS5wcm9qZWN0TmFtZSA9IG5ld05hbWU7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2VsZWN0KGluZGV4LCBib29sKSB7XG5cdFx0cHJvamVjdExpc3RbaW5kZXhdLnNlbGVjdGVkID0gYm9vbDtcblx0XHRzYXZlUHJvamVjdChwcm9qZWN0TGlzdCk7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdG1ha2VQcm9qZWN0LFxuXHRcdGNoYW5nZU5hbWUsXG5cdFx0cmVtb3ZlUHJvamVjdCxcblx0XHRzZWxlY3QsXG5cdFx0c2F2ZVByb2plY3QsXG5cdFx0cHJvamVjdExpc3QsXG5cdH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBwcm9qZWN0TG9naWM7XG4iLCJpbXBvcnQgcHJvamVjdExvZ2ljIGZyb20gXCIuL3Byb2plY3QtbG9naWMuanNcIjtcblxuY2xhc3MgVG9kbyB7XG5cdGNvbnN0cnVjdG9yKHRvZG9OYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlZCkge1xuXHRcdHRoaXMudG9kb05hbWUgPSB0b2RvTmFtZTtcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG5cdFx0dGhpcy5kYXRlID0gZGF0ZTtcblx0XHR0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG5cdFx0dGhpcy5jb21wbGV0ZWQgPSBmYWxzZTtcblx0fVxufVxuXG5jb25zdCB0b2RvTG9naWMgPSAoKCkgPT4ge1xuXHRsZXQgdG9kb0xpc3QgPSBbXTtcblxuXHRmdW5jdGlvbiBtYWtlVG9kbyh0b2RvTmFtZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5KSB7XG5cdFx0bGV0IG9iaiA9IG5ldyBUb2RvKHRvZG9OYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpO1xuXHRcdHRvZG9MaXN0LnB1c2gob2JqKTtcblx0XHRyZXR1cm4gb2JqO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlVG9kbyhuZXdOYW1lLCBpbmRleCkge1xuXHRcdHRvZG9MaXN0W2luZGV4XS5wcm9qZWN0TmFtZSA9IG5ld05hbWU7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gaXNTZWxlY3RlZCgpIHtcblx0XHRsZXQgbGlzdCA9IHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdDtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChsaXN0W2ldLnNlbGVjdGVkID09PSB0cnVlKSByZXR1cm4gaTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBpc1NlbGVjdGVkLCBtYWtlVG9kbyB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9kb0xvZ2ljO1xuIiwiaW1wb3J0IHByb2plY3RMb2dpYyBmcm9tIFwiLi9wcm9qZWN0LWxvZ2ljLmpzXCI7XG5pbXBvcnQgdG9kb0xvZ2ljIGZyb20gXCIuL3RvZG8tbG9naWMuanNcIjtcblxuY29uc3QgdG9kb0RPTSA9ICgoKSA9PiB7XG5cdGZ1bmN0aW9uIGFkZFRvZG9CdXR0b24oKSB7XG5cdFx0aWYgKHRvZG9Mb2dpYy5pc1NlbGVjdGVkKCkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3QgdG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1idG5cIik7XG5cdFx0XHR0b2RvQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjbG9zZWRcIik7XG5cblx0XHRcdGNvbnN0IG1vZGFsRXhpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZXhpdFwiKTtcblxuXHRcdFx0bW9kYWxFeGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNb2RhbCk7XG5cdFx0XHR0b2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNb2RhbCk7XG5cdFx0fSBlbHNlIHJlbW92ZVRvZG9CdXR0b24oKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRvZ2dsZU1vZGFsKCkge1xuXHRcdGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcblx0XHRjb25zdCBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLW92ZXJsYXlcIik7XG5cblx0XHRtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiY2xvc2VkXCIpO1xuXHRcdG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKFwiY2xvc2VkXCIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlVG9kb0J1dHRvbigpIHtcblx0XHRjb25zdCB0b2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWJ0blwiKTtcblx0XHR0b2RvQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjbG9zZWRcIik7XG5cdH1cblxuXHRmdW5jdGlvbiBtb2RhbEZsb3coKSB7XG5cdFx0Y29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tbmFtZVwiKTtcblx0XHRjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tZGVzY3JpcHRpb25cIik7XG5cdFx0Y29uc3QgdG9kb0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tZGF0ZVwiKTtcblx0XHRjb25zdCB0b2RvUHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpO1xuXHRcdGZvcm1TdWJtaXQoKTtcblx0XHR0b2RvTmFtZS52YWx1ZSA9IFwiXCI7XG5cdFx0dG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gXCJcIjtcblx0XHR0b2RvRGF0ZS52YWx1ZSA9IFwiXCI7XG5cdFx0dG9kb1ByaW9yaXR5LnZhbHVlID0gXCJcIjtcblx0XHR0b2dnbGVNb2RhbCgpO1xuXHR9XG5cblx0Y29uc3QgbW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtXCIpO1xuXHRtb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fSk7XG5cdG1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIG1vZGFsRmxvdyk7XG5cblx0ZnVuY3Rpb24gZm9ybVN1Ym1pdCgpIHtcblx0XHRjb25zdCB0b2RvTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1uYW1lXCIpO1xuXHRcdGNvbnN0IHRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1kZXNjcmlwdGlvblwiKTtcblx0XHRjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1kYXRlXCIpLnZhbHVlO1xuXHRcdGNvbnN0IHRvZG9Qcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIik7XG5cblx0XHRsZXQgdG9kbyA9IHRvZG9Mb2dpYy5tYWtlVG9kbyhcblx0XHRcdHRvZG9OYW1lLnZhbHVlLFxuXHRcdFx0dG9kb0Rlc2NyaXB0aW9uLnZhbHVlLFxuXHRcdFx0dG9kb0RhdGUsXG5cdFx0XHR0b2RvUHJpb3JpdHkudmFsdWVcblx0XHQpO1xuXG5cdFx0bGV0IGluZGV4ID0gdG9kb0xvZ2ljLmlzU2VsZWN0ZWQoKTtcblx0XHRwcm9qZWN0TG9naWMucHJvamVjdExpc3RbaW5kZXhdLnRvZG9fbGlzdC5wdXNoKHRvZG8pO1xuXHRcdHByb2plY3RMb2dpYy5zYXZlUHJvamVjdChwcm9qZWN0TG9naWMucHJvamVjdExpc3QpO1xuXHRcdGNvbnNvbGUubG9nKHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFtpbmRleF0pO1xuXHRcdGRpc3BsYXlUb2RvKCk7XG5cdH1cblxuXHRmdW5jdGlvbiBkaXNwbGF5VG9kbygpIHtcblx0XHRsZXQgaW5kZXggPSB0b2RvTG9naWMuaXNTZWxlY3RlZCgpO1xuXHRcdGxldCBsaXN0ID0gcHJvamVjdExvZ2ljLnByb2plY3RMaXN0W2luZGV4XTtcblx0XHRjbGVhclRvZG8oKTtcblx0XHRjb25zb2xlLmxvZyhsaXN0LnRvZG9fbGlzdCk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0LnRvZG9fbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0bWFrZVRvZG9UYWcobGlzdC50b2RvX2xpc3RbaV0sIGkpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJ0ZXN0MlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhclRvZG8oKSB7XG5cdFx0Y29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGVudFwiKTtcblx0XHRjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2RvLWNvbnRhaW5lclwiKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRvZG9Db250YWluZXIubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnRlbnQucmVtb3ZlQ2hpbGQodG9kb0NvbnRhaW5lcltpXSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gbWFrZVRvZG9UYWcob2JqLCBpKSB7XG5cdFx0Y29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGVudFwiKTtcblx0XHRjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCBjaGVjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRjb25zdCB0b2RvVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0Y29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG5cdFx0Y29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRjb25zdCByaWdodENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0Y29uc3QgZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdFx0Y29uc3QgZGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuXHRcdHRvZG9OYW1lLnRleHRDb250ZW50ID0gb2JqLnRvZG9OYW1lO1xuXHRcdHRvZG9EZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG9iai5kZXNjcmlwdGlvbjtcblx0XHR0b2RvRGF0ZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcblx0XHR0b2RvRGF0ZS52YWx1ZSA9IG9iai5kYXRlO1xuXHRcdHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWRhdGUtZGl2XCIpO1xuXHRcdGNoZWNrLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcblx0XHRlZGl0LnRleHRDb250ZW50ID0gXCJFXCI7XG5cdFx0ZGVsLnRleHRDb250ZW50ID0gXCJYXCI7XG5cblx0XHR0b2RvVGV4dC5jbGFzc0xpc3QuYWRkKFwidG9kby10ZXh0XCIpO1xuXHRcdHRvZG9Db250YWluZXIuY2xhc3NMaXN0LmFkZChcInRvZG8tY29udGFpbmVyXCIpO1xuXHRcdGVkaXQuY2xhc3NMaXN0LmFkZChcImJ0blwiKTtcblx0XHRkZWwuY2xhc3NMaXN0LmFkZChcImJ0blwiKTtcblxuXHRcdGVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdGVkaXRUb2RvKGkpO1xuXHRcdH0pO1xuXG5cdFx0ZGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhpKTtcblx0XHRcdGRlbGV0ZVRvZG8oaSk7XG5cdFx0fSk7XG5cblx0XHR0b2RvRGF0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdG9iai5kYXRlID0gdG9kb0RhdGUudmFsdWU7XG5cdFx0XHRwcm9qZWN0TG9naWMuc2F2ZVByb2plY3QocHJvamVjdExvZ2ljLnByb2plY3RMaXN0KTtcblx0XHR9KTtcblxuXHRcdHRvZG9UZXh0LmFwcGVuZENoaWxkKHRvZG9OYW1lKTtcblx0XHR0b2RvVGV4dC5hcHBlbmRDaGlsZCh0b2RvRGVzY3JpcHRpb24pO1xuXHRcdHJpZ2h0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9EYXRlKTtcblx0XHRyaWdodENvbnRhaW5lci5hcHBlbmRDaGlsZChlZGl0KTtcblx0XHRyaWdodENvbnRhaW5lci5hcHBlbmRDaGlsZChkZWwpO1xuXHRcdHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2spO1xuXHRcdHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQodG9kb1RleHQpO1xuXHRcdHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQocmlnaHRDb250YWluZXIpO1xuXHRcdGNvbnRlbnQuYXBwZW5kKHRvZG9Db250YWluZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZWRpdFRvZG8oaSkge1xuXHRcdGxldCBsaXN0ID0gcHJvamVjdExvZ2ljLnByb2plY3RMaXN0W3RvZG9Mb2dpYy5pc1NlbGVjdGVkKCldLnRvZG9fbGlzdDtcblx0XHRjb25zdCB0b2RvTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1uYW1lXCIpO1xuXHRcdGNvbnN0IHRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1kZXNjcmlwdGlvblwiKTtcblx0XHRjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1kYXRlXCIpO1xuXHRcdGNvbnN0IHRvZG9Qcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIik7XG5cblx0XHR0b2RvTmFtZS52YWx1ZSA9IGxpc3RbaV0udG9kb05hbWU7XG5cdFx0dG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gbGlzdFtpXS5kZXNjcmlwdGlvbjtcblx0XHR0b2RvRGF0ZS52YWx1ZSA9IGxpc3RbaV0uZGF0ZTtcblx0XHR0b2RvUHJpb3JpdHkudmFsdWUgPSBsaXN0W2ldLnByaW9yaXR5O1xuXHRcdHRvZ2dsZU1vZGFsKCk7XG5cblx0XHRtb2RhbEZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBtb2RhbEZsb3cpO1xuXG5cdFx0bW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gdG9kb0VkaXRGb3JtKCkge1xuXHRcdFx0bGlzdFtpXS50b2RvTmFtZSA9IHRvZG9OYW1lLnZhbHVlO1xuXHRcdFx0bGlzdFtpXS5kZXNjcmlwdGlvbiA9IHRvZG9EZXNjcmlwdGlvbi52YWx1ZTtcblx0XHRcdGxpc3RbaV0uZGF0ZSA9IHRvZG9EYXRlLnZhbHVlO1xuXHRcdFx0bGlzdFtpXS5wcmlvcml0eSA9IHRvZG9Qcmlvcml0eS52YWx1ZTtcblx0XHRcdGNsZWFyVG9kbygpO1xuXHRcdFx0ZGlzcGxheVRvZG8oKTtcblx0XHRcdHRvZ2dsZU1vZGFsKCk7XG5cdFx0XHR0b2RvTmFtZS52YWx1ZSA9IFwiXCI7XG5cdFx0XHR0b2RvRGVzY3JpcHRpb24udmFsdWUgPSBcIlwiO1xuXHRcdFx0dG9kb0RhdGUudmFsdWUgPSBcIlwiO1xuXHRcdFx0dG9kb1ByaW9yaXR5LnZhbHVlID0gXCJcIjtcblx0XHRcdHByb2plY3RMb2dpYy5zYXZlUHJvamVjdChwcm9qZWN0TG9naWMucHJvamVjdExpc3QpO1xuXHRcdFx0dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRvZG9FZGl0Rm9ybSk7XG5cdFx0XHRtb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBtb2RhbEZsb3cpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVsZXRlVG9kbyhpKSB7XG5cdFx0bGV0IGxpc3QgPSBwcm9qZWN0TG9naWMucHJvamVjdExpc3RbdG9kb0xvZ2ljLmlzU2VsZWN0ZWQoKV0udG9kb19saXN0O1xuXHRcdGxpc3Quc3BsaWNlKGksIDEpO1xuXHRcdHByb2plY3RMb2dpYy5zYXZlUHJvamVjdChwcm9qZWN0TG9naWMucHJvamVjdExpc3QpO1xuXHRcdGRpc3BsYXlUb2RvKCk7XG5cdH1cblxuXHRyZXR1cm4geyBhZGRUb2RvQnV0dG9uLCByZW1vdmVUb2RvQnV0dG9uLCBkaXNwbGF5VG9kbyB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9kb0RPTTtcbiIsImltcG9ydCBwcm9qZWN0TG9naWMgZnJvbSBcIi4vcHJvamVjdC1sb2dpYy5qc1wiO1xuaW1wb3J0IHRvZG9Mb2dpYyBmcm9tIFwiLi90b2RvLWxvZ2ljLmpzXCI7XG5pbXBvcnQgdG9kb0RPTSBmcm9tIFwiLi90b2RvLWRvbS5qc1wiO1xuXG5jb25zdCBwcm9qZWN0RE9NID0gKCgpID0+IHtcblx0Y29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHMtY29udGFpbmVyXCIpO1xuXHRjb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLXByb2plY3RcIik7XG5cblx0cHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRjb25zdCBwcm9qZWN0VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1uYW1lXCIpO1xuXHRcdGFkZFByb2plY3RUb0FycmF5KHByb2plY3RUZXh0LnZhbHVlKTtcblx0XHRyZW5kZXIoKTtcblx0XHRwcm9qZWN0VGV4dC52YWx1ZSA9IFwiXCI7XG5cdH0pO1xuXG5cdGZ1bmN0aW9uIGFkZFByb2plY3QoaW5wdXROYW1lLCBpKSB7XG5cdFx0Y29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0Y29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGNvbnN0IGVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXHRcdGNvbnN0IGRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cblx0XHRwcm9qZWN0LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xuXHRcdHByb2plY3ROYW1lLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRpdGxlXCIpO1xuXHRcdGVkaXQuY2xhc3NMaXN0LmFkZChcImJ0blwiKTtcblx0XHRkZWwuY2xhc3NMaXN0LmFkZChcImJ0blwiKTtcblx0XHRlZGl0LnRleHRDb250ZW50ID0gXCJFXCI7XG5cdFx0ZGVsLnRleHRDb250ZW50ID0gXCJYXCI7XG5cblx0XHRwcm9qZWN0TmFtZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRkZXNlbGVjdFByb2plY3QoKTtcblx0XHRcdHByb2plY3RMb2dpYy5zZWxlY3QoaSwgdHJ1ZSk7XG5cdFx0XHRyZW5kZXIoKTtcblx0XHR9KTtcblxuXHRcdGVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZWRpdFByb2plY3QoaSk7XG5cdFx0fSk7XG5cblx0XHRkZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZGVsZXRlUHJvamVjdChpKTtcblx0XHR9KTtcblxuXHRcdHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gaW5wdXROYW1lO1xuXG5cdFx0cHJvamVjdC5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG5cdFx0cHJvamVjdC5hcHBlbmRDaGlsZChlZGl0KTtcblx0XHRwcm9qZWN0LmFwcGVuZENoaWxkKGRlbCk7XG5cblx0XHRwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcdGNsZWFyUHJvamVjdCgpO1xuXHRcdGxldCBpID0gMDtcblx0XHRsZXQgbGlzdCA9IHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdDtcblx0XHRjb25zb2xlLmxvZyhsaXN0KTtcblx0XHRmb3IgKGk7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRhZGRQcm9qZWN0KGxpc3RbaV0ucHJvamVjdE5hbWUsIGkpO1xuXHRcdFx0aWYgKGxpc3RbaV0uc2VsZWN0ZWQgPT09IHRydWUpIHtcblx0XHRcdFx0c2VsZWN0UHJvamVjdChpKTtcblx0XHRcdFx0dG9kb0RPTS5hZGRUb2RvQnV0dG9uKCk7XG5cdFx0XHRcdHRvZG9ET00uZGlzcGxheVRvZG8oKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhclByb2plY3QoKSB7XG5cdFx0d2hpbGUgKHByb2plY3RDb250YWluZXIuZmlyc3RDaGlsZCkge1xuXHRcdFx0cHJvamVjdENvbnRhaW5lci5yZW1vdmVDaGlsZChwcm9qZWN0Q29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZFByb2plY3RUb0FycmF5KHByb2plY3ROYW1lKSB7XG5cdFx0cHJvamVjdExvZ2ljLm1ha2VQcm9qZWN0KHByb2plY3ROYW1lLCBbXSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkZWxldGVQcm9qZWN0KGkpIHtcblx0XHQvLyBpZiAocHJvamVjdExvZ2ljLnByb2plY3RMaXN0KVxuXHRcdGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3RcIik7XG5cdFx0cHJvamVjdENvbnRhaW5lci5yZW1vdmVDaGlsZChwcm9qZWN0W2ldKTtcblx0XHRwcm9qZWN0TG9naWMucmVtb3ZlUHJvamVjdChpKTtcblx0XHRyZW5kZXIoKTtcblx0XHRjb25zb2xlLmxvZyh0b2RvTG9naWMuaXNTZWxlY3RlZCgpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVkaXRQcm9qZWN0KGkpIHtcblx0XHRjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpO1xuXHRcdGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdC10aXRsZVwiKTtcblx0XHRjb25zdCBlZGl0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRlZGl0VGV4dC5jbGFzc0xpc3QuYWRkKFwiZWRpdC10ZXh0XCIpO1xuXHRcdGVkaXRUZXh0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuXHRcdGVkaXRUZXh0LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjEwXCIpO1xuXHRcdGVkaXRUZXh0LnZhbHVlID0gcHJvamVjdExvZ2ljLnByb2plY3RMaXN0W2ldLnByb2plY3ROYW1lO1xuXHRcdHByb2plY3RbaV0ucmVtb3ZlQ2hpbGQocHJvamVjdFRpdGxlW2ldKTtcblx0XHRwcm9qZWN0W2ldLmFwcGVuZENoaWxkKGVkaXRUZXh0KTtcblx0XHRlZGl0VGV4dC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGUpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwieWVzXCIpO1xuXHRcdFx0XHRwcm9qZWN0TG9naWMuY2hhbmdlTmFtZShlZGl0VGV4dC52YWx1ZSwgaSk7XG5cdFx0XHRcdHJlbmRlcigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2VsZWN0UHJvamVjdChpKSB7XG5cdFx0ZGVzZWxlY3RQcm9qZWN0KCk7XG5cdFx0cHJvamVjdExvZ2ljLnNlbGVjdChpLCB0cnVlKTtcblx0XHRjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpO1xuXHRcdHByb2plY3RbaV0uc3R5bGUuY3NzVGV4dCA9IFwiYmFja2dyb3VuZC1jb2xvcjogbGlnaHRibHVlXCI7XG5cdH1cblxuXHRmdW5jdGlvbiBkZXNlbGVjdFByb2plY3QoKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0TG9naWMucHJvamVjdExpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdHByb2plY3RMb2dpYy5zZWxlY3QoaSwgZmFsc2UpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IGFkZFByb2plY3QsIHJlbmRlciB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgcHJvamVjdERPTTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRlc3QoKSB7XG5cdGNvbnNvbGUubG9nKFwidGVzdFwiKTtcbn1cbiIsImltcG9ydCB0ZXN0IGZyb20gXCIuL3Rlc3QuanNcIjtcbmltcG9ydCBwcm9qZWN0TG9naWMgZnJvbSBcIi4vcHJvamVjdC1sb2dpYy5qc1wiO1xuaW1wb3J0IHByb2plY3RET00gZnJvbSBcIi4vcHJvamVjdC1kb20uanNcIjtcbmltcG9ydCB0b2RvTG9naWMgZnJvbSBcIi4vdG9kby1sb2dpYy5qc1wiO1xuXG50ZXN0KCk7XG5wcm9qZWN0RE9NLnJlbmRlcigpO1xucHJvamVjdERPTTtcbiJdLCJzb3VyY2VSb290IjoiIn0=