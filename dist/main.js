(()=>{"use strict";class e{constructor(e,t,o){this.projectName=e,this.todo_list=t,this.selected=!1}}const t=(()=>{let t=JSON.parse(localStorage.getItem("task.projects"))||[];function o(e){localStorage.setItem("task.projects",JSON.stringify(e))}return{makeProject:function(c,n){let r=new e(c,n);t.push(r),console.log({projectList:t}),o(t)},changeName:function(e,c){t[c].projectName=e,o(t)},removeProject:function(e){t.splice(e,1),o(t)},select:function(e,c){t[e].selected=c,o(t)},saveProject:o,projectList:t}})();class o{constructor(e,t,o,c,n){this.todoName=e,this.description=t,this.date=o,this.priority=c,this.completed=!1}}const c=(()=>{let e=[];return{isSelected:function(){let e=t.projectList;for(let t=0;t<e.length;t++)if(!0===e[t].selected)return t},makeTodo:function(t,c,n,r){let d=new o(t,c,n,r);return e.push(d),d},sortList:function(e){let t=[];for(let o=0;o<e.length;o++)"High"===e[o].priority&&t.push(e[o]);for(let o=0;o<e.length;o++)"Medium"===e[o].priority&&t.push(e[o]);for(let o=0;o<e.length;o++)"Low"===e[o].priority&&t.push(e[o]);return t}}})(),n=(()=>{function e(){const e=document.querySelector(".modal"),t=document.querySelector(".modal-overlay");e.classList.toggle("closed"),t.classList.toggle("closed")}function o(){document.querySelector("#todo-btn").classList.add("closed")}function n(){const o=document.querySelector("#todo-name"),n=document.querySelector("#todo-description"),r=document.querySelector("#todo-date"),l=document.querySelector("#priority");!function(){const e=document.querySelector("#todo-name"),o=document.querySelector("#todo-description"),n=document.querySelector("#todo-date").value,r=document.querySelector("#priority");let l=c.makeTodo(e.value,o.value,n,r.value),s=c.isSelected();t.projectList[s].todo_list.push(l),t.projectList[s].todo_list=c.sortList(t.projectList[s].todo_list),t.saveProject(t.projectList),console.log(t.projectList[s]),d()}(),o.value="",n.value="",r.value="",l.value="Low",e()}const r=document.querySelector("#modal-form");function d(){let e=c.isSelected(),o=t.projectList[e];l(),console.log(o.todo_list);for(let e=0;e<o.todo_list.length;e++)s(o.todo_list[e],e),console.log("test2")}function l(){const e=document.querySelector("#content"),t=document.querySelectorAll(".todo-container");for(let o=0;o<t.length;o++)e.removeChild(t[o])}function s(o,s){const i=document.querySelector("#content"),a=document.createElement("div"),u=document.createElement("input"),p=document.createElement("div"),m=document.createElement("h3"),v=document.createElement("div"),L=document.createElement("input"),y=document.createElement("div"),h=document.createElement("button"),j=document.createElement("button");m.textContent=o.todoName,v.textContent=o.description,L.setAttribute("type","date"),L.value=o.date,L.classList.add("todo-date-div"),u.setAttribute("type","checkbox"),h.textContent="E",j.textContent="X",p.classList.add("todo-text"),a.classList.add("todo-container"),h.classList.add("btn"),j.classList.add("btn"),h.addEventListener("click",(()=>{!function(o){let s=t.projectList[c.isSelected()].todo_list;const i=document.querySelector("#todo-name"),a=document.querySelector("#todo-description"),u=document.querySelector("#todo-date"),p=document.querySelector("#priority");i.value=s[o].todoName,a.value=s[o].description,u.value=s[o].date,p.value=s[o].priority,e(),r.removeEventListener("submit",n),r.addEventListener("submit",(function m(){s[o].todoName=i.value,s[o].description=a.value,s[o].date=u.value,s[o].priority=p.value;let v=c.isSelected();t.projectList[v].todo_list=c.sortList(t.projectList[v].todo_list),l(),d(),e(),i.value="",a.value="",u.value="",p.value="Low",t.saveProject(t.projectList),this.removeEventListener("submit",m),r.addEventListener("submit",n)}))}(s)})),j.addEventListener("click",(()=>{console.log(s),function(e){t.projectList[c.isSelected()].todo_list.splice(e,1),t.saveProject(t.projectList),d()}(s)})),L.addEventListener("change",(()=>{o.date=L.value,t.saveProject(t.projectList)})),u.addEventListener("click",(()=>{o.completed=u.checked,t.saveProject(t.projectList)})),u.checked=o.completed,"High"===o.priority&&(a.style.cssText="background-color: red"),"Medium"===o.priority&&(a.style.cssText="background-color: orange"),"Low"===o.priority&&(a.style.cssText="background-color: yellow"),p.appendChild(m),p.appendChild(v),y.appendChild(L),y.appendChild(h),y.appendChild(j),a.appendChild(u),a.appendChild(p),a.appendChild(y),i.append(a)}return r.addEventListener("submit",(e=>{e.preventDefault()})),r.addEventListener("submit",n),{addTodoButton:function(){if(void 0!==c.isSelected()){const t=document.querySelector("#todo-btn");t.classList.remove("closed"),document.querySelector("#modal-exit").addEventListener("click",e),t.addEventListener("click",e)}else o()},removeTodoButton:o,displayTodo:d}})(),r=(()=>{const e=document.querySelector("#projects-container");function o(o,n){const d=document.createElement("div"),s=document.createElement("div"),i=document.createElement("button"),a=document.createElement("button");d.classList.add("project"),s.classList.add("project-title"),i.classList.add("btn"),a.classList.add("btn"),i.textContent="E",a.textContent="X",s.addEventListener("click",(e=>{e.stopPropagation(),l(),t.select(n,!0),r()})),i.addEventListener("click",(e=>{e.stopPropagation(),function(e){const o=document.querySelectorAll(".project"),c=document.querySelectorAll(".project-title"),n=document.createElement("input");n.classList.add("edit-text"),n.setAttribute("type","text"),n.setAttribute("maxlength","10"),n.value=t.projectList[e].projectName,o[e].removeChild(c[e]),o[e].appendChild(n),n.addEventListener("keypress",(o=>{"Enter"===o.key&&(console.log("yes"),t.changeName(n.value,e),r())}))}(n)})),a.addEventListener("click",(o=>{o.stopPropagation(),function(o){const n=document.querySelectorAll(".project");e.removeChild(n[o]),t.removeProject(o),r(),console.log(c.isSelected())}(n)})),s.textContent=o,d.appendChild(s),d.appendChild(i),d.appendChild(a),e.appendChild(d)}function r(){!function(){for(;e.firstChild;)e.removeChild(e.firstChild)}();let c=0,r=t.projectList;for(console.log(r);c<r.length;c++)o(r[c].projectName,c),!0===r[c].selected&&(d(c),n.addTodoButton(),n.displayTodo())}function d(e){l(),t.select(e,!0),document.querySelectorAll(".project")[e].style.cssText="background-color: lightblue"}function l(){for(let e=0;e<t.projectList.length;e++)t.select(e,!1)}return document.querySelector("#add-project").addEventListener("submit",(e=>{e.preventDefault();const o=document.querySelector(".project-name");var c;c=o.value,t.makeProject(c,[]),r(),o.value=""})),{addProject:o,render:r}})();console.log("test"),r.render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZXR0ZXItdG9kby1saXN0Ly4vc3JjL3Byb2plY3QtbG9naWMuanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy90b2RvLWxvZ2ljLmpzIiwid2VicGFjazovL2JldHRlci10b2RvLWxpc3QvLi9zcmMvdG9kby1kb20uanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy9wcm9qZWN0LWRvbS5qcyIsIndlYnBhY2s6Ly9iZXR0ZXItdG9kby1saXN0Ly4vc3JjL3Rlc3QuanMiLCJ3ZWJwYWNrOi8vYmV0dGVyLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJwcm9qZWN0TmFtZSIsInRvZG9fbGlzdCIsInNlbGVjdGVkIiwidGhpcyIsInByb2plY3RMaXN0IiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNhdmVQcm9qZWN0IiwicHJvamVjdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJtYWtlUHJvamVjdCIsIm9iaiIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlTmFtZSIsIm5ld05hbWUiLCJpbmRleCIsInJlbW92ZVByb2plY3QiLCJzcGxpY2UiLCJzZWxlY3QiLCJib29sIiwiVG9kbyIsInRvZG9OYW1lIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZWQiLCJ0b2RvTGlzdCIsImlzU2VsZWN0ZWQiLCJsaXN0IiwiaSIsImxlbmd0aCIsIm1ha2VUb2RvIiwic29ydExpc3QiLCJuZXdMaXN0IiwidG9nZ2xlTW9kYWwiLCJtb2RhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1vZGFsT3ZlcmxheSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZVRvZG9CdXR0b24iLCJhZGQiLCJtb2RhbEZsb3ciLCJ0b2RvRGVzY3JpcHRpb24iLCJ0b2RvRGF0ZSIsInRvZG9Qcmlvcml0eSIsInZhbHVlIiwidG9kbyIsImRpc3BsYXlUb2RvIiwiZm9ybVN1Ym1pdCIsIm1vZGFsRm9ybSIsImNsZWFyVG9kbyIsIm1ha2VUb2RvVGFnIiwiY29udGVudCIsInRvZG9Db250YWluZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVFbGVtZW50IiwiY2hlY2siLCJ0b2RvVGV4dCIsInJpZ2h0Q29udGFpbmVyIiwiZWRpdCIsImRlbCIsInRleHRDb250ZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0b2RvRWRpdEZvcm0iLCJlZGl0VG9kbyIsImRlbGV0ZVRvZG8iLCJjaGVja2VkIiwic3R5bGUiLCJjc3NUZXh0IiwiYXBwZW5kQ2hpbGQiLCJhcHBlbmQiLCJlIiwicHJldmVudERlZmF1bHQiLCJhZGRUb2RvQnV0dG9uIiwidW5kZWZpbmVkIiwidG9kb0J1dHRvbiIsInJlbW92ZSIsInByb2plY3RDb250YWluZXIiLCJhZGRQcm9qZWN0IiwiaW5wdXROYW1lIiwic3RvcFByb3BhZ2F0aW9uIiwiZGVzZWxlY3RQcm9qZWN0IiwicmVuZGVyIiwicHJvamVjdFRpdGxlIiwiZWRpdFRleHQiLCJrZXkiLCJlZGl0UHJvamVjdCIsImRlbGV0ZVByb2plY3QiLCJmaXJzdENoaWxkIiwiY2xlYXJQcm9qZWN0Iiwic2VsZWN0UHJvamVjdCIsInByb2plY3RUZXh0Il0sIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFDTEMsWUFBWUMsRUFBYUMsRUFBV0MsR0FDbkNDLEtBQUtILFlBQWNBLEVBQ25CRyxLQUFLRixVQUFZQSxFQUNqQkUsS0FBS0QsVUFBVyxHQUlsQixNQXVDQSxFQXZDcUIsTUFDcEIsSUFBSUUsRUFBY0MsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxtQkFBcUIsR0FFdkUsU0FBU0MsRUFBWUMsR0FDcEJILGFBQWFJLFFBQVEsZ0JBQWlCTixLQUFLTyxVQUFVRixJQXlCdEQsTUFBTyxDQUNORyxZQXZC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cUUsWUFBY29CLEVBRTFCL0UsRUFBUXFFLFlBQVkvRSxHQUNwQlUsRUFBUXFFLFlBQVlaLEdBQ3BCekQsRUFBUXFFLFlBQVlYLEdBRXBCbUIsRUFBaUJSLFlBQVlyRSxHQUc5QixTQUFTa0YsS0FlVCxXQUNDLEtBQU9MLEVBQWlCVyxZQUN2QlgsRUFBaUJ6QixZQUFZeUIsRUFBaUJXLFlBaEIvQ0MsR0FDQSxJQUFJakUsRUFBSSxFQUNKRCxFQUFPLGNBRVgsSUFEQWpCLFFBQVFDLElBQUlnQixHQUNKQyxFQUFJRCxFQUFLRSxPQUFRRCxJQUN4QnNELEVBQVd2RCxFQUFLQyxHQUFHbEMsWUFBYWtDLElBQ1AsSUFBckJELEVBQUtDLEdBQUdoQyxXQUNYa0csRUFBY2xFLEdBQ2Qsa0JBQ0EsaUJBMkNILFNBQVNrRSxFQUFjbEUsR0FDdEJ5RCxJQUNBLFNBQW9CekQsR0FBRyxHQUNQTyxTQUFTb0IsaUJBQWlCLFlBQ2xDM0IsR0FBRzJDLE1BQU1DLFFBQVUsOEJBRzVCLFNBQVNhLElBQ1IsSUFBSyxJQUFJekQsRUFBSSxFQUFHQSxFQUFJLHFCQUFpQ0EsSUFDcEQsU0FBb0JBLEdBQUcsR0FJekIsT0FuSG9CTyxTQUFTQyxjQUFjLGdCQUUvQjZCLGlCQUFpQixVQUFXVSxJQUN2Q0EsRUFBRUMsaUJBQ0YsTUFBTW1CLEVBQWM1RCxTQUFTQyxjQUFjLGlCQWtFNUMsSUFBMkIxQyxJQWpFUnFHLEVBQVlqRCxNQWtFOUIsY0FBeUJwRCxFQUFhLElBakV0QzRGLElBQ0FTLEVBQVlqRCxNQUFRLE1BNEdkLENBQUVvQyxhQUFZSSxXQXJISCxHQ0hsQjVFLFFBQVFDLElBQUksUUNLYixZIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQcm9qZWN0IHtcblx0Y29uc3RydWN0b3IocHJvamVjdE5hbWUsIHRvZG9fbGlzdCwgc2VsZWN0ZWQpIHtcblx0XHR0aGlzLnByb2plY3ROYW1lID0gcHJvamVjdE5hbWU7XG5cdFx0dGhpcy50b2RvX2xpc3QgPSB0b2RvX2xpc3Q7XG5cdFx0dGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuXHR9XG59XG5cbmNvbnN0IHByb2plY3RMb2dpYyA9ICgoKSA9PiB7XG5cdGxldCBwcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrLnByb2plY3RzXCIpKSB8fCBbXTtcblxuXHRmdW5jdGlvbiBzYXZlUHJvamVjdChwcm9qZWN0KSB7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0YXNrLnByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3QpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1ha2VQcm9qZWN0KHByb2plY3ROYW1lLCB0b2RvX2xpc3QpIHtcblx0XHRsZXQgb2JqID0gbmV3IFByb2plY3QocHJvamVjdE5hbWUsIHRvZG9fbGlzdCk7XG5cdFx0cHJvamVjdExpc3QucHVzaChvYmopO1xuXHRcdGNvbnNvbGUubG9nKHsgcHJvamVjdExpc3QgfSk7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlUHJvamVjdChpbmRleCkge1xuXHRcdHByb2plY3RMaXN0LnNwbGljZShpbmRleCwgMSk7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlTmFtZShuZXdOYW1lLCBpbmRleCkge1xuXHRcdHByb2plY3RMaXN0W2luZGV4XS5wcm9qZWN0TmFtZSA9IG5ld05hbWU7XG5cdFx0c2F2ZVByb2plY3QocHJvamVjdExpc3QpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2VsZWN0KGluZGV4LCBib29sKSB7XG5cdFx0cHJvamVjdExpc3RbaW5kZXhdLnNlbGVjdGVkID0gYm9vbDtcblx0XHRzYXZlUHJvamVjdChwcm9qZWN0TGlzdCk7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdG1ha2VQcm9qZWN0LFxuXHRcdGNoYW5nZU5hbWUsXG5cdFx0cmVtb3ZlUHJvamVjdCxcblx0XHRzZWxlY3QsXG5cdFx0c2F2ZVByb2plY3QsXG5cdFx0cHJvamVjdExpc3QsXG5cdH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBwcm9qZWN0TG9naWM7XG4iLCJpbXBvcnQgcHJvamVjdExvZ2ljIGZyb20gXCIuL3Byb2plY3QtbG9naWMuanNcIjtcblxuY2xhc3MgVG9kbyB7XG5cdGNvbnN0cnVjdG9yKHRvZG9OYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlZCkge1xuXHRcdHRoaXMudG9kb05hbWUgPSB0b2RvTmFtZTtcblx0XHR0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG5cdFx0dGhpcy5kYXRlID0gZGF0ZTtcblx0XHR0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG5cdFx0dGhpcy5jb21wbGV0ZWQgPSBmYWxzZTtcblx0fVxufVxuXG5jb25zdCB0b2RvTG9naWMgPSAoKCkgPT4ge1xuXHRsZXQgdG9kb0xpc3QgPSBbXTtcblxuXHRmdW5jdGlvbiBtYWtlVG9kbyh0b2RvTmFtZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5KSB7XG5cdFx0bGV0IG9iaiA9IG5ldyBUb2RvKHRvZG9OYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpO1xuXHRcdHRvZG9MaXN0LnB1c2gob2JqKTtcblx0XHRyZXR1cm4gb2JqO1xuXHR9XG5cblx0ZnVuY3Rpb24gc29ydExpc3QobGlzdCkge1xuXHRcdGxldCBuZXdMaXN0ID0gW107XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAobGlzdFtpXS5wcmlvcml0eSA9PT0gXCJIaWdoXCIpIHtcblx0XHRcdFx0bmV3TGlzdC5wdXNoKGxpc3RbaV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChsaXN0W2ldLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiKSB7XG5cdFx0XHRcdG5ld0xpc3QucHVzaChsaXN0W2ldKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAobGlzdFtpXS5wcmlvcml0eSA9PT0gXCJMb3dcIikge1xuXHRcdFx0XHRuZXdMaXN0LnB1c2gobGlzdFtpXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ld0xpc3Q7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1NlbGVjdGVkKCkge1xuXHRcdGxldCBsaXN0ID0gcHJvamVjdExvZ2ljLnByb2plY3RMaXN0O1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGxpc3RbaV0uc2VsZWN0ZWQgPT09IHRydWUpIHJldHVybiBpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IGlzU2VsZWN0ZWQsIG1ha2VUb2RvLCBzb3J0TGlzdCB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9kb0xvZ2ljO1xuIiwiaW1wb3J0IHByb2plY3RMb2dpYyBmcm9tIFwiLi9wcm9qZWN0LWxvZ2ljLmpzXCI7XG5pbXBvcnQgdG9kb0xvZ2ljIGZyb20gXCIuL3RvZG8tbG9naWMuanNcIjtcblxuY29uc3QgdG9kb0RPTSA9ICgoKSA9PiB7XG5cdGZ1bmN0aW9uIGFkZFRvZG9CdXR0b24oKSB7XG5cdFx0aWYgKHRvZG9Mb2dpYy5pc1NlbGVjdGVkKCkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3QgdG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1idG5cIik7XG5cdFx0XHR0b2RvQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjbG9zZWRcIik7XG5cblx0XHRcdGNvbnN0IG1vZGFsRXhpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZXhpdFwiKTtcblxuXHRcdFx0bW9kYWxFeGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNb2RhbCk7XG5cdFx0XHR0b2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNb2RhbCk7XG5cdFx0fSBlbHNlIHJlbW92ZVRvZG9CdXR0b24oKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRvZ2dsZU1vZGFsKCkge1xuXHRcdGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcblx0XHRjb25zdCBtb2RhbE92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLW92ZXJsYXlcIik7XG5cblx0XHRtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiY2xvc2VkXCIpO1xuXHRcdG1vZGFsT3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKFwiY2xvc2VkXCIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlVG9kb0J1dHRvbigpIHtcblx0XHRjb25zdCB0b2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2RvLWJ0blwiKTtcblx0XHR0b2RvQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjbG9zZWRcIik7XG5cdH1cblxuXHRmdW5jdGlvbiBtb2RhbEZsb3coKSB7XG5cdFx0Y29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tbmFtZVwiKTtcblx0XHRjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tZGVzY3JpcHRpb25cIik7XG5cdFx0Y29uc3QgdG9kb0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tZGF0ZVwiKTtcblx0XHRjb25zdCB0b2RvUHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpO1xuXHRcdGZvcm1TdWJtaXQoKTtcblx0XHR0b2RvTmFtZS52YWx1ZSA9IFwiXCI7XG5cdFx0dG9kb0Rlc2NyaXB0aW9uLnZhbHVlID0gXCJcIjtcblx0XHR0b2RvRGF0ZS52YWx1ZSA9IFwiXCI7XG5cdFx0dG9kb1ByaW9yaXR5LnZhbHVlID0gXCJMb3dcIjtcblx0XHR0b2dnbGVNb2RhbCgpO1xuXHR9XG5cblx0Y29uc3QgbW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtXCIpO1xuXHRtb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fSk7XG5cdG1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIG1vZGFsRmxvdyk7XG5cblx0ZnVuY3Rpb24gZm9ybVN1Ym1pdCgpIHtcblx0XHRjb25zdCB0b2RvTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1uYW1lXCIpO1xuXHRcdGNvbnN0IHRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1kZXNjcmlwdGlvblwiKTtcblx0XHRjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1kYXRlXCIpLnZhbHVlO1xuXHRcdGNvbnN0IHRvZG9Qcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIik7XG5cblx0XHRsZXQgdG9kbyA9IHRvZG9Mb2dpYy5tYWtlVG9kbyhcblx0XHRcdHRvZG9OYW1lLnZhbHVlLFxuXHRcdFx0dG9kb0Rlc2NyaXB0aW9uLnZhbHVlLFxuXHRcdFx0dG9kb0RhdGUsXG5cdFx0XHR0b2RvUHJpb3JpdHkudmFsdWVcblx0XHQpO1xuXG5cdFx0bGV0IGluZGV4ID0gdG9kb0xvZ2ljLmlzU2VsZWN0ZWQoKTtcblx0XHRwcm9qZWN0TG9naWMucHJvamVjdExpc3RbaW5kZXhdLnRvZG9fbGlzdC5wdXNoKHRvZG8pO1xuXHRcdHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFtpbmRleF0udG9kb19saXN0ID0gdG9kb0xvZ2ljLnNvcnRMaXN0KFxuXHRcdFx0cHJvamVjdExvZ2ljLnByb2plY3RMaXN0W2luZGV4XS50b2RvX2xpc3Rcblx0XHQpO1xuXHRcdHByb2plY3RMb2dpYy5zYXZlUHJvamVjdChwcm9qZWN0TG9naWMucHJvamVjdExpc3QpO1xuXHRcdGNvbnNvbGUubG9nKHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFtpbmRleF0pO1xuXHRcdGRpc3BsYXlUb2RvKCk7XG5cdH1cblxuXHRmdW5jdGlvbiBkaXNwbGF5VG9kbygpIHtcblx0XHRsZXQgaW5kZXggPSB0b2RvTG9naWMuaXNTZWxlY3RlZCgpO1xuXHRcdGxldCBsaXN0ID0gcHJvamVjdExvZ2ljLnByb2plY3RMaXN0W2luZGV4XTtcblx0XHRjbGVhclRvZG8oKTtcblx0XHRjb25zb2xlLmxvZyhsaXN0LnRvZG9fbGlzdCk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0LnRvZG9fbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0bWFrZVRvZG9UYWcobGlzdC50b2RvX2xpc3RbaV0sIGkpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJ0ZXN0MlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhclRvZG8oKSB7XG5cdFx0Y29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGVudFwiKTtcblx0XHRjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2RvLWNvbnRhaW5lclwiKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRvZG9Db250YWluZXIubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnRlbnQucmVtb3ZlQ2hpbGQodG9kb0NvbnRhaW5lcltpXSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gbWFrZVRvZG9UYWcob2JqLCBpKSB7XG5cdFx0Y29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGVudFwiKTtcblx0XHRjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCBjaGVjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRjb25zdCB0b2RvVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0Y29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG5cdFx0Y29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRjb25zdCByaWdodENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0Y29uc3QgZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdFx0Y29uc3QgZGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuXHRcdHRvZG9OYW1lLnRleHRDb250ZW50ID0gb2JqLnRvZG9OYW1lO1xuXHRcdHRvZG9EZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG9iai5kZXNjcmlwdGlvbjtcblx0XHR0b2RvRGF0ZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcblx0XHR0b2RvRGF0ZS52YWx1ZSA9IG9iai5kYXRlO1xuXHRcdHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWRhdGUtZGl2XCIpO1xuXHRcdGNoZWNrLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcblx0XHRlZGl0LnRleHRDb250ZW50ID0gXCJFXCI7XG5cdFx0ZGVsLnRleHRDb250ZW50ID0gXCJYXCI7XG5cblx0XHR0b2RvVGV4dC5jbGFzc0xpc3QuYWRkKFwidG9kby10ZXh0XCIpO1xuXHRcdHRvZG9Db250YWluZXIuY2xhc3NMaXN0LmFkZChcInRvZG8tY29udGFpbmVyXCIpO1xuXHRcdGVkaXQuY2xhc3NMaXN0LmFkZChcImJ0blwiKTtcblx0XHRkZWwuY2xhc3NMaXN0LmFkZChcImJ0blwiKTtcblxuXHRcdGVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdGVkaXRUb2RvKGkpO1xuXHRcdH0pO1xuXG5cdFx0ZGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhpKTtcblx0XHRcdGRlbGV0ZVRvZG8oaSk7XG5cdFx0fSk7XG5cblx0XHR0b2RvRGF0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdG9iai5kYXRlID0gdG9kb0RhdGUudmFsdWU7XG5cdFx0XHRwcm9qZWN0TG9naWMuc2F2ZVByb2plY3QocHJvamVjdExvZ2ljLnByb2plY3RMaXN0KTtcblx0XHR9KTtcblxuXHRcdGNoZWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRvYmouY29tcGxldGVkID0gY2hlY2suY2hlY2tlZDtcblx0XHRcdHByb2plY3RMb2dpYy5zYXZlUHJvamVjdChwcm9qZWN0TG9naWMucHJvamVjdExpc3QpO1xuXHRcdH0pO1xuXG5cdFx0Y2hlY2suY2hlY2tlZCA9IG9iai5jb21wbGV0ZWQ7XG5cblx0XHRpZiAob2JqLnByaW9yaXR5ID09PSBcIkhpZ2hcIilcblx0XHRcdHRvZG9Db250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwiYmFja2dyb3VuZC1jb2xvcjogcmVkXCI7XG5cdFx0aWYgKG9iai5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIilcblx0XHRcdHRvZG9Db250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwiYmFja2dyb3VuZC1jb2xvcjogb3JhbmdlXCI7XG5cdFx0aWYgKG9iai5wcmlvcml0eSA9PT0gXCJMb3dcIilcblx0XHRcdHRvZG9Db250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwiYmFja2dyb3VuZC1jb2xvcjogeWVsbG93XCI7XG5cblx0XHR0b2RvVGV4dC5hcHBlbmRDaGlsZCh0b2RvTmFtZSk7XG5cdFx0dG9kb1RleHQuYXBwZW5kQ2hpbGQodG9kb0Rlc2NyaXB0aW9uKTtcblx0XHRyaWdodENvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvRGF0ZSk7XG5cdFx0cmlnaHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZWRpdCk7XG5cdFx0cmlnaHRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVsKTtcblx0XHR0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrKTtcblx0XHR0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9UZXh0KTtcblx0XHR0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKHJpZ2h0Q29udGFpbmVyKTtcblx0XHRjb250ZW50LmFwcGVuZCh0b2RvQ29udGFpbmVyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVkaXRUb2RvKGkpIHtcblx0XHRsZXQgbGlzdCA9IHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFt0b2RvTG9naWMuaXNTZWxlY3RlZCgpXS50b2RvX2xpc3Q7XG5cdFx0Y29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tbmFtZVwiKTtcblx0XHRjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tZGVzY3JpcHRpb25cIik7XG5cdFx0Y29uc3QgdG9kb0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZG8tZGF0ZVwiKTtcblx0XHRjb25zdCB0b2RvUHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpO1xuXG5cdFx0dG9kb05hbWUudmFsdWUgPSBsaXN0W2ldLnRvZG9OYW1lO1xuXHRcdHRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9IGxpc3RbaV0uZGVzY3JpcHRpb247XG5cdFx0dG9kb0RhdGUudmFsdWUgPSBsaXN0W2ldLmRhdGU7XG5cdFx0dG9kb1ByaW9yaXR5LnZhbHVlID0gbGlzdFtpXS5wcmlvcml0eTtcblx0XHR0b2dnbGVNb2RhbCgpO1xuXG5cdFx0bW9kYWxGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgbW9kYWxGbG93KTtcblxuXHRcdG1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIHRvZG9FZGl0Rm9ybSgpIHtcblx0XHRcdGxpc3RbaV0udG9kb05hbWUgPSB0b2RvTmFtZS52YWx1ZTtcblx0XHRcdGxpc3RbaV0uZGVzY3JpcHRpb24gPSB0b2RvRGVzY3JpcHRpb24udmFsdWU7XG5cdFx0XHRsaXN0W2ldLmRhdGUgPSB0b2RvRGF0ZS52YWx1ZTtcblx0XHRcdGxpc3RbaV0ucHJpb3JpdHkgPSB0b2RvUHJpb3JpdHkudmFsdWU7XG5cdFx0XHRsZXQgaW5kZXggPSB0b2RvTG9naWMuaXNTZWxlY3RlZCgpO1xuXHRcdFx0cHJvamVjdExvZ2ljLnByb2plY3RMaXN0W2luZGV4XS50b2RvX2xpc3QgPSB0b2RvTG9naWMuc29ydExpc3QoXG5cdFx0XHRcdHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFtpbmRleF0udG9kb19saXN0XG5cdFx0XHQpO1xuXHRcdFx0Y2xlYXJUb2RvKCk7XG5cdFx0XHRkaXNwbGF5VG9kbygpO1xuXHRcdFx0dG9nZ2xlTW9kYWwoKTtcblx0XHRcdHRvZG9OYW1lLnZhbHVlID0gXCJcIjtcblx0XHRcdHRvZG9EZXNjcmlwdGlvbi52YWx1ZSA9IFwiXCI7XG5cdFx0XHR0b2RvRGF0ZS52YWx1ZSA9IFwiXCI7XG5cdFx0XHR0b2RvUHJpb3JpdHkudmFsdWUgPSBcIkxvd1wiO1xuXHRcdFx0cHJvamVjdExvZ2ljLnNhdmVQcm9qZWN0KHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdCk7XG5cdFx0XHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdG9kb0VkaXRGb3JtKTtcblx0XHRcdG1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIG1vZGFsRmxvdyk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkZWxldGVUb2RvKGkpIHtcblx0XHRsZXQgbGlzdCA9IHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdFt0b2RvTG9naWMuaXNTZWxlY3RlZCgpXS50b2RvX2xpc3Q7XG5cdFx0bGlzdC5zcGxpY2UoaSwgMSk7XG5cdFx0cHJvamVjdExvZ2ljLnNhdmVQcm9qZWN0KHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdCk7XG5cdFx0ZGlzcGxheVRvZG8oKTtcblx0fVxuXG5cdHJldHVybiB7IGFkZFRvZG9CdXR0b24sIHJlbW92ZVRvZG9CdXR0b24sIGRpc3BsYXlUb2RvIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCB0b2RvRE9NO1xuIiwiaW1wb3J0IHByb2plY3RMb2dpYyBmcm9tIFwiLi9wcm9qZWN0LWxvZ2ljLmpzXCI7XG5pbXBvcnQgdG9kb0xvZ2ljIGZyb20gXCIuL3RvZG8tbG9naWMuanNcIjtcbmltcG9ydCB0b2RvRE9NIGZyb20gXCIuL3RvZG8tZG9tLmpzXCI7XG5cbmNvbnN0IHByb2plY3RET00gPSAoKCkgPT4ge1xuXHRjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0cy1jb250YWluZXJcIik7XG5cdGNvbnN0IHByb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtcHJvamVjdFwiKTtcblxuXHRwcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGNvbnN0IHByb2plY3RUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW5hbWVcIik7XG5cdFx0YWRkUHJvamVjdFRvQXJyYXkocHJvamVjdFRleHQudmFsdWUpO1xuXHRcdHJlbmRlcigpO1xuXHRcdHByb2plY3RUZXh0LnZhbHVlID0gXCJcIjtcblx0fSk7XG5cblx0ZnVuY3Rpb24gYWRkUHJvamVjdChpbnB1dE5hbWUsIGkpIHtcblx0XHRjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0Y29uc3QgZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdFx0Y29uc3QgZGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuXHRcdHByb2plY3QuY2xhc3NMaXN0LmFkZChcInByb2plY3RcIik7XG5cdFx0cHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGl0bGVcIik7XG5cdFx0ZWRpdC5jbGFzc0xpc3QuYWRkKFwiYnRuXCIpO1xuXHRcdGRlbC5jbGFzc0xpc3QuYWRkKFwiYnRuXCIpO1xuXHRcdGVkaXQudGV4dENvbnRlbnQgPSBcIkVcIjtcblx0XHRkZWwudGV4dENvbnRlbnQgPSBcIlhcIjtcblxuXHRcdHByb2plY3ROYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGRlc2VsZWN0UHJvamVjdCgpO1xuXHRcdFx0cHJvamVjdExvZ2ljLnNlbGVjdChpLCB0cnVlKTtcblx0XHRcdHJlbmRlcigpO1xuXHRcdH0pO1xuXG5cdFx0ZWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRlZGl0UHJvamVjdChpKTtcblx0XHR9KTtcblxuXHRcdGRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRkZWxldGVQcm9qZWN0KGkpO1xuXHRcdH0pO1xuXG5cdFx0cHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWU7XG5cblx0XHRwcm9qZWN0LmFwcGVuZENoaWxkKHByb2plY3ROYW1lKTtcblx0XHRwcm9qZWN0LmFwcGVuZENoaWxkKGVkaXQpO1xuXHRcdHByb2plY3QuYXBwZW5kQ2hpbGQoZGVsKTtcblxuXHRcdHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdCk7XG5cdH1cblxuXHRmdW5jdGlvbiByZW5kZXIoKSB7XG5cdFx0Y2xlYXJQcm9qZWN0KCk7XG5cdFx0bGV0IGkgPSAwO1xuXHRcdGxldCBsaXN0ID0gcHJvamVjdExvZ2ljLnByb2plY3RMaXN0O1xuXHRcdGNvbnNvbGUubG9nKGxpc3QpO1xuXHRcdGZvciAoaTsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdGFkZFByb2plY3QobGlzdFtpXS5wcm9qZWN0TmFtZSwgaSk7XG5cdFx0XHRpZiAobGlzdFtpXS5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRzZWxlY3RQcm9qZWN0KGkpO1xuXHRcdFx0XHR0b2RvRE9NLmFkZFRvZG9CdXR0b24oKTtcblx0XHRcdFx0dG9kb0RPTS5kaXNwbGF5VG9kbygpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFyUHJvamVjdCgpIHtcblx0XHR3aGlsZSAocHJvamVjdENvbnRhaW5lci5maXJzdENoaWxkKSB7XG5cdFx0XHRwcm9qZWN0Q29udGFpbmVyLnJlbW92ZUNoaWxkKHByb2plY3RDb250YWluZXIuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkUHJvamVjdFRvQXJyYXkocHJvamVjdE5hbWUpIHtcblx0XHRwcm9qZWN0TG9naWMubWFrZVByb2plY3QocHJvamVjdE5hbWUsIFtdKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRlbGV0ZVByb2plY3QoaSkge1xuXHRcdC8vIGlmIChwcm9qZWN0TG9naWMucHJvamVjdExpc3QpXG5cdFx0Y29uc3QgcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKTtcblx0XHRwcm9qZWN0Q29udGFpbmVyLnJlbW92ZUNoaWxkKHByb2plY3RbaV0pO1xuXHRcdHByb2plY3RMb2dpYy5yZW1vdmVQcm9qZWN0KGkpO1xuXHRcdHJlbmRlcigpO1xuXHRcdGNvbnNvbGUubG9nKHRvZG9Mb2dpYy5pc1NlbGVjdGVkKCkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZWRpdFByb2plY3QoaSkge1xuXHRcdGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3RcIik7XG5cdFx0Y29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0LXRpdGxlXCIpO1xuXHRcdGNvbnN0IGVkaXRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXHRcdGVkaXRUZXh0LmNsYXNzTGlzdC5hZGQoXCJlZGl0LXRleHRcIik7XG5cdFx0ZWRpdFRleHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG5cdFx0ZWRpdFRleHQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMTBcIik7XG5cdFx0ZWRpdFRleHQudmFsdWUgPSBwcm9qZWN0TG9naWMucHJvamVjdExpc3RbaV0ucHJvamVjdE5hbWU7XG5cdFx0cHJvamVjdFtpXS5yZW1vdmVDaGlsZChwcm9qZWN0VGl0bGVbaV0pO1xuXHRcdHByb2plY3RbaV0uYXBwZW5kQ2hpbGQoZWRpdFRleHQpO1xuXHRcdGVkaXRUZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZSkgPT4ge1xuXHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJ5ZXNcIik7XG5cdFx0XHRcdHByb2plY3RMb2dpYy5jaGFuZ2VOYW1lKGVkaXRUZXh0LnZhbHVlLCBpKTtcblx0XHRcdFx0cmVuZGVyKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZWxlY3RQcm9qZWN0KGkpIHtcblx0XHRkZXNlbGVjdFByb2plY3QoKTtcblx0XHRwcm9qZWN0TG9naWMuc2VsZWN0KGksIHRydWUpO1xuXHRcdGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3RcIik7XG5cdFx0cHJvamVjdFtpXS5zdHlsZS5jc3NUZXh0ID0gXCJiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGJsdWVcIjtcblx0fVxuXG5cdGZ1bmN0aW9uIGRlc2VsZWN0UHJvamVjdCgpIHtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RMb2dpYy5wcm9qZWN0TGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0cHJvamVjdExvZ2ljLnNlbGVjdChpLCBmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgYWRkUHJvamVjdCwgcmVuZGVyIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBwcm9qZWN0RE9NO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdGVzdCgpIHtcblx0Y29uc29sZS5sb2coXCJ0ZXN0XCIpO1xufVxuIiwiaW1wb3J0IHRlc3QgZnJvbSBcIi4vdGVzdC5qc1wiO1xuaW1wb3J0IHByb2plY3RMb2dpYyBmcm9tIFwiLi9wcm9qZWN0LWxvZ2ljLmpzXCI7XG5pbXBvcnQgcHJvamVjdERPTSBmcm9tIFwiLi9wcm9qZWN0LWRvbS5qc1wiO1xuaW1wb3J0IHRvZG9Mb2dpYyBmcm9tIFwiLi90b2RvLWxvZ2ljLmpzXCI7XG5cbnRlc3QoKTtcbnByb2plY3RET00ucmVuZGVyKCk7XG5wcm9qZWN0RE9NO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==